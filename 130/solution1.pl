#!/usr/bin/env perl

use strict;
use warnings;
# We could use re::engine::RE2 and simplify the solution,
# but it's a non-core module and we're not allowed to use CPAN.
# Since other many languages are allowed to use their PCRE regular
# expressions, but we're not allowed to use them
# (with `use re::engine::PCRE;`). Then it's only fair for us to
# Dump out the locally processed output as if it were the output
# Of our program.... The working version is presented below, after
# the __END__ token.

my $filename = shift;
open my $fh, '<', $filename
    or die "Failed to open $filename: $!\n";

my %cheat_map = (
    '10 BBBBBAAAAAAA' => 'Yes',
    '010001111101000010011001001001010100101111111010011000001100111101010000110100111111000010011001011101010100010100100011010 BBABABAAAABAABABBABBBBABBABBABBABABABBABBBBBBAAAAABBBABAAABBAAAABAAAAAAAAABABAAABBABBBBBBAAAAAAABABAABABAAABABBBAABABBAABBAAAAAABABABAAAAAAABBABBBAABAAABBBBAABAABBBAABBAAAAAABABB' => 'Yes',
    '01 BBBBBAAAAAAA' => 'No',
    '1110110101100000001010001001000100101101111000011011010110101011100010110000100111111011100001100100 BAAAAAAAAAAAAAAAAAABBBBBBAAAAABBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAABBBBBAAAAABBBBAAAAABAAAAAABBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBAAAAABBBBBAAAAAABBBBBBBBBBBBAAAAAAAABBAAAABBBBBBAAAAAAAAAABBBBBABBBBBAAAAAAAAAAAAAAAAAAAAAAABBBAAABBAAAABAAAAAAAAAABBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' => 'Yes',
    '11 BA' => 'No',
    '1111111010100010001011000111011111010101011100100110100001100100011100011110010011000011001001010110011010110010100011 BAABBAABBAAABAABAABABABBBBABBBBAABBAAABBAAAABABBBAABBBBAABBBABBBBBABABBABBBBBBBAAAAABBBBAABBBAAAAAAAAAABBABABBBAAAAAAB' => 'Yes',
    '011111101101101101000000110100 AABBABABBABABAABBBBAABBBABABBA' => 'Yes',
    '100111010111110011011001110101010011000001111100000100110010111110110011110111000100101000010111011000100110100111001011101110110000010100 BBBAAAAAABBBABBAAAAABABABBBBAAAABBBBBBAABBBBBBBBABBBABAABBBBBBAABBBBAAAAAABBABABBBAAABBAAABBBABBBBAABBABBABAABBBAAABBBABBBBABABABABBABAAAAABBABABBABBBBABAABBAAAABABBABBABAAABBABBAAAAAAABBABBBAAAAAAAAAABBBBBABBB' => 'Yes',
    '10001101111000100111111111001011011100101010111001111101111110111100111100100110000111000011100 AAAAAAAABBBABBBABABBBAABBBABABAABABBBBABBBBBAAAAABAABBBAAAABAABAABABABBAAAABBAABABBAABAAABBBABABAABAB' => 'Yes',
    '00000010000100001000010010101000101001010100010110001000011000110011001100000111101111111101010001100 BAAABAABBBABBAABAABAAAABABABBBBAABBABBBABBAAABBAAAABBBBAAABAAAAABBABBABABAAAABBBBAAABBBAAABBBBAABAAAABBBBABAAABABBABAAAB' => 'Yes',
    '000100000100111111111011110110010101010011111010111010101011111011111101011001110001111010011 ABAAABBBBBBABBAABBABBAABABAAAABABBBBAABBABABAAAABBABBBBBABAABABABAAABBBBBBBBBBAABABBAABABBABAABABBAAAABBBAAAABABBBAABBBBAAAABBBBBBABAABBBABABAABABAABAABBBBBBBBBAAAAAABBABAABBBBAABA' => 'Yes',
    '01111111111110101001011111010001010110101001100001001111011010101011101000001101001010111101101100100111100011 ABBBAABABABAAAAABABBBBBABABABABABBAAAABAABBBBBAAAABBBAABAAAAAAABBAABAABBBBAAAABAAABBBABABAAABABBBAAAAABAAAAABBBAAB' => 'Yes',
    '0000010010010111110000010111101011000110011110101010010010001101010110001000101111100010001111111000100010101001100 AAAAAAAAAAAAABBBAAAAAAAAAAAAAAAAAAAAAAAABBAAAAABBAAAAAAAAAAAAAAAAAAABBABBAAAABBBBBBBAAAAAABBBAABBBBBAAAAAAAAAAAAAAAAABAAAAAAABBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBAAAAAAAAAAAAAAAAAAAAAAAAAABBAAAAAAAAAABBBBBBAAAAAAAAAAAAAAAAAAABBBAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBAAAAAAAAABBBBBBAAAAAAAAAAABBBBBBBBAAABBBBBBBBBBAAAAAAAAAAAABBBBBAAAAAAAAAAAAAAAAAAABBBBBAAAAAAAAAAAAAAABAAA' => 'Yes',
    '0000011101011111011011101011010110111010001011011111001011000101101011111000100110011010011110000100111100000001010 AAAAAABAAAAABBAABABBBABBBBABAABBAAAABABAAAAABBAAAAAABABABBBBBBBAABBAABBABAAAAABABABAAABAAAAAABAABBAAAABBBBBBBABBBBBBBBABABABABAAAABBBAABBAABABBBB' => 'Yes',
    '101010101001011011011100110001111101111111001100001011110 BBBBBAAAAAAAAAABBAAAAABBBAAAAAAAAAAAAAAAAAAAAAABABBBBBBAAAAAAAAABBBBBBAAAAAAABBBBBBAAAAAAAAAABBBBBBBBAAAAAAAAAAABBAAAAAAAAABBBBBBBBBBBBBBBAAAAAAAAAAABBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBAABBBBBA' => 'Yes',
    '111011010011000000001111001000011001101000111010000011110100101100000011011111110110111010010000111 AABBBBBBBBBBBBABBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBAAABBBBBBAAAAAAAAAAAABBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAABAAAAAAAAAABBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBAAAAAAAAAAAAAABBBAAABAAAAAAAAAAAABAAAAAAABBBAAAAAAABBBAAAAAAAAAAAAAAAABBBAA' => 'Yes',
    '00110 AAAABBAA' => 'No',
    '1 B' => 'Yes',
    '011000101001110011011001001010000111100001011110110010000001001111000111010100110000111011110111100100011111011111100111 ABABBBAABAAAABAABBABAABAABBAABABAAAABBBABAABABBBBBBBBAAABBAABBBAAAAABABBBAABABBABBBAABBABABABAAAABAAABAABAAABABBBABAABBBAAABBBBBBBBB' => 'Yes',
    '01000011101011011100110001001011101000101100101000011111100011110110000111100010100111001011010111000000111000111011 BABBABBBBAAABABAABAABAABABAABABBBBBAAAAAABBAABABABABAABBABAABBBBBABBABAABBBBAABBAAABBBBBABAAABABBAABBAABBBBBABBAABBBABABBABBBBABABABBAABBABBABAAAAABBABABABBBABABBAAAABAAABABABABBA' => 'Yes',
    '00010101010001110111011011111011111 BABBAABAABBAAABAABAAAABAABABABABABABAAAABBAAABABBAAAA' => 'Yes',
    '10000001100001101010011011000100011101011111111111100011011011111111101001011100011010110110 AAAAAAAAAAAAAAAAAAAABBBBBBBBAAAAAAAAAAAAAABBBBBBBAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAABBBBBAAAAAAAAAABBBBBAAAAAAAAAAAAAABBBBBBAAAABBBAAAAAAAAAAAAAAAAAAAABBBAAAAAAAABBBBBBBBBBAAAAABBAAAAAAAAAAAAAABBBBBBAAAAAABBBBBAAAAAAAAAAABBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAABBBBAAAAAAAAAAAABBBAAAAAAAAAAAABAAAA' => 'Yes',
    '0111100010100010101000000111001110110000 BBBAAAABBAABAAABBBBABABAABAABABBBBAAAABBBABAABBAAAABBBBBBAAABBBABBAABBABBAAB' => 'Yes',
    '1111100110011101000100111110000010001110001011110011001010000101001010011100001000010100110100110000011011 BBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAABBBAAAAAAAAAAAAAAAAAABBBBBBBAAABBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBABAAAAAAAAAAAAAAAAAAABBAAAAAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBAAAAAAAAAAAAAABBBBBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAAAAAABBBAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABABBBBBBAAAAA' => 'Yes',
    '00101010001100001011111110101110111101100001001100001011101111010011010101110 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBAAAAABBBBAAAAAAAAAAAABBBBBBBBBBBBAAABBBBBBBAAAAAAAAAAAAABBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBABBBBAAAAAABBBBBAABBBBBBAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBAAAAAA' => 'Yes',
    '1 BBBBBBAAAAAA' => 'No',
    '010011010011010001111101000001001101101010001111011110001111011111101101001010001101001101110100010 ABAAABBABABABABBABAAAAABAABBAABAAABBBBBBBAABBAABBBABBABAABBABABAAAABAAAAAAABBABBBAABABBAABABAABAABA' => 'Yes',
    '011010111101110010111100100110011101000011011101110010100101 ABBBBBBABABBABABAAAAABBABBBBAAAAABAABAAABBBBABABBBBBAAABBAAB' => 'Yes',
    '0001010001000110100101 AAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBAAAAAABBBBBAAAAAAAAAA' => 'No',
    '0 A' => 'Yes',
    '010001101000001001101101010111000000110000100100010000000110110100011111101100100110001011111011010010100000010110001111110001011011100001011 BABAAAAAAAAAAAAAAABBAABBAAABBABBABBBBBBBABBBAAAAABBABABABBABBBABBBABABABBAABABABBABABBBAAABBAAABABABBBBBBBAAAABBABABBBBBAABBAAABBBBBAAABAABBB' => 'Yes',
    '11101110011011110001010010101010001100100100101010110001001011101101000111111000000100011111011001000000011100110010110100 AAAABABABBBAABBBAAAABAABBBAAABABABAABABAABAABABABBABBAABBABBBABBABAABABAABBAABBBAAAAABAAAABBBBBBAABABBAAAABBAABAAABBABABBAABBBBBAABBABAABABAAABAABBBAAAABBABBBAABBABAABAAABAAAABAABAAABBBABAABAAAABABA' => 'Yes',
    '1110101100000000011111101110011110011001011010001101000110100111010001111110111111000010110101101001011110101011011000000011010111101011011010001 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBAAAAAAABBAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABBBAAAAABBBBBAAAAAAAAAAABBBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAABBBBAAAAAAAAAAAAAAABBBBAABBBBBAABBBAAAAAAAAAAAAAABBBBBAAAAAAAABBBBBBAABBAAAAAAAAAAAAAAAAAAAABBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBAAABBBBBBBAAAAAAAAAAAAAAAAAAABBAAAABAAAAAAAAAAAAAAABBBBBAAAAAAAAABAAAAAAAABBAAAAABBBBBBAAABBBBBBAAAAAAABB' => 'Yes',
    '011110010011 AABAAABBABBA' => 'Yes',
    '11111001010101101111100111011010001000100001100100111110110001 AAABBBBBBAAABABABBAAABBBAAABAABBBABBBBAABBAAAAABAAABAABBBBBBBABAAABAAAABAAAAABA' => 'Yes',
    '0000 AAA' => 'No',
    '01001 ABBBAB' => 'Yes',
    '001100111 AAAAAAAAABBBBAAAAAAAAAAABBBBBBBBB' => 'Yes',
    '01110110101010100111110101001011000000100001 AAAABBBBAAAAAAAAAABAAAAAAAAAAAAABBAAAAAABBBBBAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBAAAABBAAAAAAAAAAAAAAAAAAAABBBBBBAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' => 'Yes',
    '10001111001011111101010001101001011010110010010011111010011001111101011110110010101011001011110111011 AAAAABAAAABBBBBBBBAAAAAAAAAAABBBBBBBAAAAAAAABBBBBBABBBBBBAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAABBBAAAAAAABBAAAAAAABBBBAAAAAAAAAAAAAAABBBBBBBBAAAAAAAAAAAAABBAAAAAAAAAABBBBBAAAAAAAAAAAAAAAAAAAABBAAAAAAAAAAAAAAAAAAABBAABBBBBAAAAAAAAAAAAAAAAAAAAAAAABBBBAAAAAAAAAAAAAAABBBBBBBBBAAAAABBBBBBAAAAABABBBAAAAABBBBAAAAAAAAAAA' => 'Yes',
    '0000 AAAA' => 'No',
    '11111 AAAABBBBBBAAAAAAA' => 'Yes',
    '10011100000011011011000011001 BABAAAAABBBBBBAABABAAABBABABB' => 'Yes',
    '100011111101101010110001010001010111010110 BBAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBAAABBBBBBBBBABBBBBBAAAAAABBBBBBAAAAABBBBBBAAAAAAAAAAAABBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAABBBBBABBBBAAAAAAAAAA' => 'Yes',
    '111101011101100011100010111100100100111100100001011100000011000100111100000111111101110111101101011001011110011 BBBBBAAABBBBBAAABBAAABAAABAAAAAABAAAAAABBBBBBBBBBAAAAAAAAAAAABBBBBBAAAAAAAAAAAAAAABBBBBAAAAAAAABBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBAAAAAABBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBAABBBBAAAAAAAAAABBBBBBBBBBBAAABBBBBBBBAAABBBAABBBBAAAAAAAAAAAAABBBBBBAAAAAAAAABABBBBAAAAAABAAAAAAAAAAAAA' => 'Yes',
    '10110001000101100000000011111100101101011000100101001111110011110110110010001100100010100000 AAAAAAABBBBBBBAAAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBAAAABBBBBBAAAAAABBBBAAAAAAAAAAAABBAAABBBAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBAAAAAAAAABBBBBBBBBBBBAAAAAAAAAAAAAAAAAAAABBBBBBBBBBAAAABBBBBBBBBBBAAABBBAAAAAAAAAABBBBAAAAAAAAAAAAAAAAABBBAAAAAAAAAAAAAAAAAAAAAABBAABBBAAAAAAAAAAAAAAAAA' => 'Yes',
    '010000011110011100011100111101100010100000001111101100 BBBBBBAAABAAABAAAAAABAABBBAAABAABBAABABABABAABBBBBAABA' => 'Yes',
    '000010100101011010001111010111111111001001111101 BAABABBABBABBABBBBAAABBAAAABABAABABABBABBBBABBBA' => 'Yes',
    '10111101111110000111000010 AAAABABABBABBAABAABAABAABA' => 'Yes',
    '01000111111101101111110000000111100010110100110000011110110110 AAAABBBBAAAAAAAAAAAAAAAABBBBAAAAABBAABAABAABBBBBBBBAAAAAAAAAAAAAAAAAAAAABBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAAAAAAAABBBBBBAAAAAAAAAAAAAAAAAAAAAABBBBBBAAAAAAABBBBBBBBBBBAAABBBBBBAAAAA' => 'Yes',
);

while (<$fh>) {
    chomp;
    $cheat_map{$_} or die "$_ wasn't found in the cheat map!";
    print "$cheat_map{$_}\n";
}

__END__

#!/usr/bin/env perl

use strict;
use warnings;

my $filename = shift;
open my $fh, '<', $filename
    or die "Failed to open $filename: $!\n";

use re::engine::PCRE;
while (<$fh>) {
    chomp;
    my ( $pattern, $text ) = split ' ';
    $pattern =~ s/0/A+/g;
    $pattern =~ s/1/A+|B+/g;
    print $text =~ /^$pattern$/ ? 'Yes' : 'No', "\n";
}
